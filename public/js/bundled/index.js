var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},e=function(t){return t&&t.Math==Math&&t};r=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||function(){return this}()||Function("return this")();var n,o,a={};n=!(o=function(t){try{return!!t()}catch(t){return!0}})((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}));var i=Function.prototype.call;a=n?i.bind(i):function(){return i.apply(i,arguments)};var u,c;c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView;var s;s=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}));var f,p={},l="object"==typeof document&&document.all,d=(f={all:l,IS_HTMLDDA:void 0===l&&void 0!==l}).all;p=f.IS_HTMLDDA?function(t){return"function"==typeof t||t===d}:function(t){return"function"==typeof t};var y={},v=f.all;y=f.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:p(t)||t===v}:function(t){return"object"==typeof t?null!==t:p(t)};var g,m,b,h={},w=Function.prototype,S=w.call,A=n&&w.bind.bind(S,S),T=(b=function(t){return n?A(t):function(){return S.apply(t,arguments)}})({}.toString),E=b("".slice);m=function(t){return E(T(t),8,-1)},g=function(t){if("Function"===m(t))return b(t)};var O,j,_;_=function(t){return null==t};var I=TypeError;j=function(t){if(_(t))throw I("Can't call method on "+t);return t};var P=Object;O=function(t){return P(j(t))};var C=g({}.hasOwnProperty);h=Object.hasOwn||function(t,r){return C(O(t),r)};var B,D,F,M={};var R,k={},U=Object.defineProperty;R=function(t,e){try{U(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e};var x=r["__core-js_shared__"]||R("__core-js_shared__",{});k=x,(F=function(t,r){return k[t]||(k[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"});var z,q=0,W=Math.random(),H=g(1..toString);z=function(t){return"Symbol("+(void 0===t?"":t)+")_"+H(++q+W,36)};var N,V,$,G={},J=function(t){return p(t)?t:void 0};G=($=function(t,e){return arguments.length<2?J(r[t]):r[t]&&r[t][e]})("navigator","userAgent")||"";var Y,X,K=r.process,Q=r.Deno,Z=K&&K.versions||Q&&Q.version,tt=Z&&Z.v8;tt&&(X=(Y=tt.split("."))[0]>0&&Y[0]<4?1:+(Y[0]+Y[1])),!X&&G&&(!(Y=G.match(/Edge\/(\d+)/))||Y[1]>=74)&&(Y=G.match(/Chrome\/(\d+)/))&&(X=+Y[1]),V=X,N=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&V&&V<41}));var rt;rt=N&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var et=F("wks"),nt=r.Symbol,ot=nt&&nt.for,at=rt?nt:nt&&nt.withoutSetter||z,it={};it[(D=function(t){if(!h(et,t)||!N&&"string"!=typeof et[t]){var r="Symbol."+t;N&&h(nt,t)?et[t]=nt[t]:et[t]=rt&&ot?ot(r):at(r)}return et[t]})("toStringTag")]="z",B="[object z]"===String(it);var ut=D("toStringTag"),ct=Object,st="Arguments"==m(function(){return arguments}());M=B?m:function(t){var r,e,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,r){try{return t[r]}catch(t){}}(r=ct(t),ut))?e:st?m(r):"Object"==(n=m(r))&&p(r.callee)?"Arguments":n};var ft,pt=String;ft=function(t){try{return pt(t)}catch(t){return"Object"}};var lt,dt,yt,vt={},gt=r.document,mt=y(gt)&&y(gt.createElement);yt=function(t){return mt?gt.createElement(t):{}},dt=!s&&!o((function(){return 7!=Object.defineProperty(yt("div"),"a",{get:function(){return 7}}).a}));var bt;bt=s&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}));var ht,wt=String,St=TypeError;ht=function(t){if(y(t))return t;throw St(wt(t)+" is not an object")};var At,Tt,Et={},Ot={};Ot=g({}.isPrototypeOf);var jt=Object;Et=rt?function(t){return"symbol"==typeof t}:function(t){var r=$("Symbol");return p(r)&&Ot(r.prototype,jt(t))};var _t,It,Pt=TypeError;It=function(t){if(p(t))return t;throw Pt(ft(t)+" is not a function")},_t=function(t,r){var e=t[r];return _(e)?void 0:It(e)};var Ct,Bt=TypeError;Ct=function(t,r){var e,n;if("string"===r&&p(e=t.toString)&&!y(n=a(e,t)))return n;if(p(e=t.valueOf)&&!y(n=a(e,t)))return n;if("string"!==r&&p(e=t.toString)&&!y(n=a(e,t)))return n;throw Bt("Can't convert object to primitive value")};var Dt=TypeError,Ft=D("toPrimitive");Tt=function(t,r){if(!y(t)||Et(t))return t;var e,n=_t(t,Ft);if(n){if(void 0===r&&(r="default"),e=a(n,t,r),!y(e)||Et(e))return e;throw Dt("Can't convert object to primitive value")}return void 0===r&&(r="number"),Ct(t,r)},At=function(t){var r=Tt(t,"string");return Et(r)?r:r+""};var Lt=TypeError,Mt=Object.defineProperty,Rt=Object.getOwnPropertyDescriptor;lt=s?bt?function(t,r,e){if(ht(t),r=At(r),ht(e),"function"==typeof t&&"prototype"===r&&"value"in e&&"writable"in e&&!e.writable){var n=Rt(t,r);n&&n.writable&&(t[r]=e.value,e={configurable:"configurable"in e?e.configurable:n.configurable,enumerable:"enumerable"in e?e.enumerable:n.enumerable,writable:!1})}return Mt(t,r,e)}:Mt:function(t,r,e){if(ht(t),r=At(r),ht(e),dt)try{return Mt(t,r,e)}catch(t){}if("get"in e||"set"in e)throw Lt("Accessors not supported");return"value"in e&&(t[r]=e.value),t};var kt;kt=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}},vt=s?function(t,r,e){return lt(t,r,kt(1,e))}:function(t,r,e){return t[r]=e,t};var Ut,xt,zt=Function.prototype,qt=s&&Object.getOwnPropertyDescriptor,Wt=h(zt,"name"),Ht={EXISTS:Wt,PROPER:Wt&&"something"===function(){}.name,CONFIGURABLE:Wt&&(!s||s&&qt(zt,"name").configurable)}.CONFIGURABLE,Nt={},Vt=g(Function.toString);p(k.inspectSource)||(k.inspectSource=function(t){return Vt(t)}),Nt=k.inspectSource;var $t,Gt,Jt=r.WeakMap;Gt=p(Jt)&&/native code/.test(String(Jt));var Yt,Xt=F("keys");Yt=function(t){return Xt[t]||(Xt[t]=z(t))};var Kt={};Kt={};var Qt,Zt,tr,rr=r.TypeError,er=r.WeakMap;if(Gt||k.state){var nr=k.state||(k.state=new er);nr.get=nr.get,nr.has=nr.has,nr.set=nr.set,Qt=function(t,r){if(nr.has(t))throw rr("Object already initialized");return r.facade=t,nr.set(t,r),r},Zt=function(t){return nr.get(t)||{}},tr=function(t){return nr.has(t)}}else{var or=Yt("state");Kt[or]=!0,Qt=function(t,r){if(h(t,or))throw rr("Object already initialized");return r.facade=t,vt(t,or,r),r},Zt=function(t){return h(t,or)?t[or]:{}},tr=function(t){return h(t,or)}}var ar=($t={set:Qt,get:Zt,has:tr,enforce:function(t){return tr(t)?Zt(t):Qt(t,{})},getterFor:function(t){return function(r){var e;if(!y(r)||(e=Zt(r)).type!==t)throw rr("Incompatible receiver, "+t+" required");return e}}}).enforce,ir=$t.get,ur=Object.defineProperty,cr=s&&!o((function(){return 8!==ur((function(){}),"length",{value:8}).length})),sr=String(String).split("String"),fr=xt=function(t,r,e){"Symbol("===String(r).slice(0,7)&&(r="["+String(r).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),e&&e.getter&&(r="get "+r),e&&e.setter&&(r="set "+r),(!h(t,"name")||Ht&&t.name!==r)&&(s?ur(t,"name",{value:r,configurable:!0}):t.name=r),cr&&e&&h(e,"arity")&&t.length!==e.arity&&ur(t,"length",{value:e.arity});try{e&&h(e,"constructor")&&e.constructor?s&&ur(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=ar(t);return h(n,"source")||(n.source=sr.join("string"==typeof r?r:"")),t};Function.prototype.toString=fr((function(){return p(this)&&ir(this).source||Nt(this)}),"toString"),Ut=function(t,r,e,n){n||(n={});var o=n.enumerable,a=void 0!==n.name?n.name:r;if(p(e)&&xt(e,a,n),n.global)o?t[r]=e:R(r,e);else{try{n.unsafe?t[r]&&(o=!0):delete t[r]}catch(t){}o?t[r]=e:lt(t,r,{value:e,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t};var pr,lr=lt,dr={};pr=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}));var yr=Yt("IE_PROTO"),vr=Object,gr=vr.prototype;dr=pr?vr.getPrototypeOf:function(t){var r=O(t);if(h(r,yr))return r[yr];var e=r.constructor;return p(e)&&r instanceof e?e.prototype:r instanceof vr?gr:null};var mr,br={},hr=String,wr=TypeError;mr=function(t){if("object"==typeof t||p(t))return t;throw wr("Can't set "+hr(t)+" as a prototype")},br=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,e={};try{(t=g(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),r=e instanceof Array}catch(t){}return function(e,n){return ht(e),mr(n),r?t(e,n):e.__proto__=n,e}}():void 0);var Sr,Ar,Tr,Er=$t.enforce,Or=$t.get,jr=r.Int8Array,_r=jr&&jr.prototype,Ir=r.Uint8ClampedArray,Pr=Ir&&Ir.prototype,Cr=jr&&dr(jr),Br=_r&&dr(_r),Dr=Object.prototype,Fr=r.TypeError,Lr=D("toStringTag"),Mr=z("TYPED_ARRAY_TAG"),Rr=c&&!!br&&"Opera"!==M(r.opera),kr=!1,Ur={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},xr={BigInt64Array:8,BigUint64Array:8},zr=function(t){var r=dr(t);if(y(r)){var e=Or(r);return e&&h(e,"TypedArrayConstructor")?e.TypedArrayConstructor:zr(r)}},qr=function(t){if(!y(t))return!1;var r=M(t);return h(Ur,r)||h(xr,r)};for(Sr in Ur)(Tr=(Ar=r[Sr])&&Ar.prototype)?Er(Tr).TypedArrayConstructor=Ar:Rr=!1;for(Sr in xr)(Tr=(Ar=r[Sr])&&Ar.prototype)&&(Er(Tr).TypedArrayConstructor=Ar);if((!Rr||!p(Cr)||Cr===Function.prototype)&&(Cr=function(){throw Fr("Incorrect invocation")},Rr))for(Sr in Ur)r[Sr]&&br(r[Sr],Cr);if((!Rr||!Br||Br===Dr)&&(Br=Cr.prototype,Rr))for(Sr in Ur)r[Sr]&&br(r[Sr].prototype,Br);if(Rr&&dr(Pr)!==Br&&br(Pr,Br),s&&!h(Br,Lr))for(Sr in kr=!0,lr(Br,Lr,{get:function(){return y(this)?this[Mr]:void 0}}),Ur)r[Sr]&&vt(r[Sr],Mr,Sr);u={NATIVE_ARRAY_BUFFER_VIEWS:Rr,TYPED_ARRAY_TAG:kr&&Mr,aTypedArray:function(t){if(qr(t))return t;throw Fr("Target is not a typed array")},aTypedArrayConstructor:function(t){if(p(t)&&(!br||Ot(Cr,t)))return t;throw Fr(ft(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,o){if(s){if(n)for(var a in Ur){var i=r[a];if(i&&h(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}Br[t]&&!n||Ut(Br,t,n?e:Rr&&_r[t]||e,o)}},exportTypedArrayStaticMethod:function(t,e,n){var o,a;if(s){if(br){if(n)for(o in Ur)if((a=r[o])&&h(a,t))try{delete a[t]}catch(t){}if(Cr[t]&&!n)return;try{return Ut(Cr,t,n?e:Rr&&Cr[t]||e)}catch(t){}}for(o in Ur)!(a=r[o])||a[t]&&!n||Ut(a,t,e)}},getTypedArrayConstructor:zr,isView:function(t){if(!y(t))return!1;var r=M(t);return"DataView"===r||h(Ur,r)||h(xr,r)},isTypedArray:qr,TypedArray:Cr,TypedArrayPrototype:Br};var Wr,Hr,Nr,Vr={},$r=Math.ceil,Gr=Math.floor;Vr=Math.trunc||function(t){var r=+t;return(r>0?Gr:$r)(r)},Nr=function(t){var r=+t;return r!=r||0===r?0:Vr(r)};var Jr=Math.min;Hr=function(t){return t>0?Jr(Nr(t),9007199254740991):0},Wr=function(t){return Hr(t.length)};var Yr,Xr,Kr=RangeError;Xr=function(t){var r=Nr(t);if(r<0)throw Kr("The argument can't be less than 0");return r};var Qr=RangeError;Yr=function(t,r){var e=Xr(t);if(e%r)throw Qr("Wrong offset");return e};var Zr=r.RangeError,te=r.Int8Array,re=te&&te.prototype,ee=re&&re.set,ne=u.aTypedArray,oe=u.exportTypedArrayMethod,ae=!o((function(){var t=new Uint8ClampedArray(2);return a(ee,t,{length:1,0:3},1),3!==t[1]})),ie=ae&&u.NATIVE_ARRAY_BUFFER_VIEWS&&o((function(){var t=new te(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));oe("set",(function(t){ne(this);var r=Yr(arguments.length>1?arguments[1]:void 0,1),e=O(t);if(ae)return a(ee,this,e,r);var n=this.length,o=Wr(e),i=0;if(o+r>n)throw Zr("Wrong length");for(;i<o;)this[r+i]=e[i++]}),!ae||ie);const ue=t=>{var r=L.map("map",{zoomControl:!1});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(r);const e=[];t.forEach((t=>{e.push([t.coordinates[1],t.coordinates[0]]),L.marker([t.coordinates[1],t.coordinates[0]]).addTo(r).bindPopup(`<h2>Day ${t.day}: ${t.description}</h2>`).openPopup()}));const n=L.latLngBounds(e).pad(.5);r.fitBounds(n),r.scrollWheelZoom.disable()},ce=()=>{const t=document.querySelector(".alert");t&&t.parentElement.removeChild(t)},se=(t,r,e=5)=>{ce();const n=`<div class="alert alert--${t}">${r}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",n),window.setTimeout(ce,1e3*e)},fe=async function(t,r){try{"success"===(await axios({method:"POST",url:"/api/v1/users/login",data:{email:t,password:r}})).data.status&&(se("success","Logged in successfully!"),window.setTimeout((()=>{location.assign("/")}),1e3))}catch(t){se("error",t.response.data.message)}},pe=async(t,r)=>{try{const e="password"===r?"/api/v1/users/updateMyPassword":"/api/v1/users/updateMe";"success"===(await axios({method:"PATCH",url:e,data:t})).data.status&&se("success",`${r.toUpperCase()} updated successfully!`)}catch(t){se("error",t.response.data.message)}},le=(Stripe("pk_test_51LxdKHJQ17Kvc3Fl7CrDdhnJdzvHtr0cBuS8zkDePzRJXOqJbewGVMPZaFigWXWId6aOQHMbwwCceeNJc2a3R11S00PrLF3n9p"),async t=>{try{const r=await axios(`/api/v1/bookings/checkout-session/${t}`);window.location.replace(r.data.session.url)}catch(t){console.log(t),se("error",t)}}),de=document.getElementById("map"),ye=document.querySelector(".form--login"),ve=document.querySelector(".nav__el--logout"),ge=document.querySelector(".form-user-data"),me=document.querySelector(".form-user-password"),be=document.getElementById("book-tour");if(de){ue(JSON.parse(de.dataset.locations))}ye&&ye.addEventListener("submit",(t=>{t.preventDefault();const r=document.getElementById("email").value,e=document.getElementById("password").value;fe(r,e)})),ve&&ve.addEventListener("click",(async function(){try{"success"===(await axios({method:"GET",url:"/api/v1/users/logout"})).data.status&&window.setTimeout((()=>{location.assign("/")}),1e3)}catch(t){se("error","Error logging out. Try again.")}})),ge&&ge.addEventListener("submit",(t=>{t.preventDefault();const r=new FormData;r.append("name",document.getElementById("name").value),r.append("email",document.getElementById("email").value),r.append("photo",document.getElementById("photo").files[0]),pe(r,"data")})),me&&me.addEventListener("submit",(async t=>{t.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";const r=document.getElementById("password-current").value,e=document.getElementById("password").value,n=document.getElementById("password-confirm").value;await pe({passwordCurrent:r,password:e,passwordConfirm:n},"password"),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""})),be&&be.addEventListener("click",(t=>{t.target.textContent="Processing...";const{tourId:r}=t.target.dataset;le(r)}));const he=document.querySelector("body").dataset.alert;he&&se("success",he,20);
//# sourceMappingURL=index.js.map
